{% load static %}
<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–°–∏—Å—Ç–µ–º–∞ –î–ë–û{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script>
        tailwind.config = {
            plugins: [daisyui],
            daisyui: {
                themes: ["dark"],
                base: true,
                styled: true,
                utils: true,
                prefix: "",
                logs: false,
                themeRoot: ":root",
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        
        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ */
        body {
            background: #111827 !important; /* dark:bg-gray-900 */
        }
        
        .main-content {
            background: hsl(var(--b2));
            min-height: calc(100vh - 80px);
        }
        
        /* –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è daisyUI 5 */
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        [data-theme="dark"] .glass-effect {
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, hsl(var(--p)) 0%, hsl(var(--s)) 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        [data-theme="dark"] .card-hover:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
        }
        
        .btn-modern {
            background: linear-gradient(135deg, hsl(var(--p)) 0%, hsl(var(--s)) 100%);
            border: none;
            color: white;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-modern:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px hsl(var(--p) / 0.4);
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .animate-delay-1 {
            animation-delay: 0.1s;
        }
        
        .animate-delay-2 {
            animation-delay: 0.2s;
        }
        
        .animate-delay-3 {
            animation-delay: 0.3s;
        }
        
        /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è navbar */
        .navbar {
            backdrop-filter: blur(10px);
            background: hsl(var(--b2) / 0.8);
            border-bottom: 1px solid hsl(var(--b3));
        }
        
        
        /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è dropdown */
        .dropdown .dropdown-content {
            backdrop-filter: blur(10px);
            background: #111827 !important; /* —Ñ–æ–Ω –∫–∞–∫ —É —Å–∞–π—Ç–∞ */
            border: 1px solid hsl(var(--b3));
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞ */
        .avatar {
            transition: all 0.3s ease;
        }
        
        .avatar:hover {
            transform: scale(1.05);
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        .btn {
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-1px);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é */
        @media (max-width: 1024px) {
            .navbar-center {
                display: none;
            }
        }
        
        /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–µ–Ω—é */
        .menu li > * {
            transition: all 0.3s ease;
        }
        
        .menu li > *:hover {
            background: hsl(var(--b2)) !important; /* –±–æ–ª–µ–µ –ø–ª–æ—Ç–Ω—ã–π —Ñ–æ–Ω –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
            transform: translateX(2px);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∫–æ–Ω–æ–∫ */
        svg {
            transition: all 0.3s ease;
        }
        
        .btn:hover svg {
            transform: scale(1.1);
        }
        
        /* –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –¥–ª—è –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        * {
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π */
        .menu li > *:active {
            transform: scale(0.98);
        }
        
        /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ñ—É—Ç–µ—Ä–∞ */
        footer {
            backdrop-filter: blur(10px);
            background: hsl(var(--b2) / 0.8);
            border-top: 1px solid hsl(var(--b3));
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –±–µ–≥—É—â–µ–π —Å—Ç—Ä–æ–∫–∏ - —É–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑ input.css */
    </style>
</head>
<body class="text-base-content transition-colors duration-300 min-h-screen">
    <!-- –£–ª—É—á—à–µ–Ω–Ω—ã–π Header —Å –±–æ–ª—å—à–∏–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º -->
    <div class="navbar bg-base-200 shadow-lg sticky top-0 z-50">
        <div class="navbar-start">
            <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é -->
            <div class="dropdown lg:hidden">
                <div tabindex="0" role="button" class="btn btn-ghost btn-circle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />
                    </svg>
                </div>
                <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52">
                    <li><a href="{% url 'home' %}">üè† –ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="{% url 'banking_services' %}">üíº –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —É—Å–ª—É–≥–∏</a></li>
                    {% if request.user.is_authenticated %}
                    <li>
                        <a href="{% if 'operator1' in user.username %}{% url 'operator1_dashboard' %}{% elif 'operator2' in user.username %}{% url 'operator2_dashboard' %}{% elif is_dbo_client %}{% url 'client_dashboard' %}{% else %}/client/{% endif %}">üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                    </li>
                    {% if is_dbo_client %}
                    <li><a href="{% url 'my_services' %}">üìã –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏</a></li>
                    <li><a href="{% url 'create_service_request' %}">üìù –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ —É—Å–ª—É–≥—É</a></li>
                    {% endif %}
                    {% endif %}
                    {% if not is_operator %}
                    <li><a href="{% url 'deposits' %}">üí∞ –î–µ–ø–æ–∑–∏—Ç—ã</a></li>
                    <li><a href="{% url 'investments' %}">üìà –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</a></li>
                    <li><a href="{% url 'cards' %}">üí≥ –ö–∞—Ä—Ç—ã</a></li>
                    {% endif %}
                    {% if request.user.is_authenticated and is_dbo_client %}
                    <li><a href="{% url 'transfers' %}">üîÅ –ü–µ—Ä–µ–≤–æ–¥—ã</a></li>
                    <li><a href="{% url 'my_requests' %}">üìÑ –ú–æ–∏ –∑–∞—è–≤–∫–∏</a></li>
                    {% endif %}
                    
                </ul>
            </div>
            
            <!-- –õ–æ–≥–æ—Ç–∏–ø –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ -->
            <div class="flex items-center space-x-3">
                <div class="avatar">
                    <div class="w-12 rounded-xl bg-gradient-to-r from-primary to-secondary shadow-lg">
                        <div class="flex items-center justify-center h-full">
                            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-base-content">–ë–∞–Ω–∫ "–§–∏–Ω–∞–Ω—Å–ü—Ä–æ"</h1>
                    <p class="text-xs text-base-content/70">–î–ë–û –°–∏—Å—Ç–µ–º–∞</p>
                </div>
            </div>
        </div>
        
        <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="navbar-center hidden lg:flex">
            <ul class="menu menu-horizontal px-1">
                <li><a href="{% url 'home' %}" class="btn btn-ghost">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    –ì–ª–∞–≤–Ω–∞—è
                </a></li>
                <li><a href="{% url 'banking_services' %}" class="btn btn-ghost">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                    –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —É—Å–ª—É–≥–∏
                </a></li>
                {% if request.user.is_authenticated and is_dbo_client %}
                <li><a href="{% url 'my_services' %}" class="btn btn-ghost">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏
                </a></li>
                {% endif %}
            </ul>
        </div>
        
        <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å header -->
        <div class="navbar-end">
            <div class="flex items-center space-x-4">
                
                <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å -->
                {% if user.is_authenticated %}
                    <div class="dropdown dropdown-end">
                        <div tabindex="0" role="button" class="btn btn-ghost gap-2">
                            <div class="avatar">
                                <div class="w-10 rounded-full bg-gradient-to-r from-primary to-secondary">
                                    <div class="flex items-center justify-center h-full">
                                        <span class="text-white font-bold">{{ user_display_initial|default:user.username|first|upper }}</span>
                                    </div>
                                </div>
                            </div>
                            <span class="hidden md:inline">{{ user_display_name|default:user.username }}</span>
                            <svg class="w-3 h-3 opacity-70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </div>
                        <ul tabindex="0" class="menu dropdown-content bg-base-100 rounded-2xl z-[1] mt-3 w-72 p-2 shadow-xl">
                            <li class="menu-title"><span class="opacity-60">–ü—Ä–æ—Ñ–∏–ª—å</span></li>
                            <li>
                                <a href="{% if 'operator1' in user.username %}{% url 'operator1_dashboard' %}{% elif 'operator2' in user.username %}{% url 'operator2_dashboard' %}{% elif is_dbo_client %}{% url 'client_dashboard' %}{% else %}/client/{% endif %}">üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                            </li>
                            {% if 'operator1' in user.username %}
                                <li><a href="{% url 'create_client' %}">‚ûï –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</a></li>
                            {% endif %}
                            {% if is_dbo_client %}
                                <li><a href="{% url 'create_service_request' %}">üìù –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ —É—Å–ª—É–≥—É</a></li>
                                <li><a href="{% url 'my_services' %}">üìã –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏</a></li>
                                <li><a href="{% url 'my_requests' %}">üìÑ –ú–æ–∏ –∑–∞—è–≤–∫–∏</a></li>
                            {% endif %}
                            {% if not is_operator %}
                            <li class="menu-title"><span class="opacity-60">–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã</span></li>
                            <li><a href="{% url 'banking_services' %}">üíº –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —É—Å–ª—É–≥–∏</a></li>
                            <li><a href="{% url 'deposits' %}">üí∞ –î–µ–ø–æ–∑–∏—Ç—ã</a></li>
                            <li><a href="{% url 'investments' %}">üìà –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</a></li>
                            <li><a href="{% url 'cards' %}">üí≥ –ö–∞—Ä—Ç—ã</a></li>
                            {% if is_dbo_client %}
                                <li><a href="{% url 'transfers' %}">üîÅ –ü–µ—Ä–µ–≤–æ–¥—ã</a></li>
                                <li><a href="{% url 'transactions' %}">üìä –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</a></li>
                            {% endif %}
                            {% endif %}
                            <li class="mt-2"><a href="/logout" class="text-error">–í—ã–π—Ç–∏</a></li>
                        </ul>
                    </div>
                {% else %}
                    <a href="/login" class="btn btn-primary">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
                        </svg>
                        –í–æ–π—Ç–∏
                    </a>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="min-h-screen pb-16">
        {% if messages %}
        <script id="flash-messages" type="application/json">
        [
        {% for message in messages %}
          {"type":"{{ message.tags|default:'info' }}","msg":"{{ message|escapejs }}"}{% if not forloop.last %},{% endif %}
        {% endfor %}
        ]
        </script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var el = document.getElementById('flash-messages');
                if (!el) return;
                try {
                    var toastQueue = JSON.parse(el.textContent || '[]');
                    if (typeof showToast === 'function') {
                        toastQueue.forEach(function(m) { showToast(m.type, m.msg); });
                    }
                } catch (e) {
                    console.error('Failed to parse flash messages', e);
                }
            });
        </script>
        {% endif %}

        {% block content %}{% endblock %}
    </main>

    <!-- –ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏ -->
    {% if news_ticker %}
    <div id="news-ticker" class="bg-primary text-primary-content py-2 overflow-hidden fixed bottom-0 left-0 right-0 z-50">
        <div id="news-ticker-track" class="flex animate-marquee-slow">
            {% for news in news_ticker %}
            <div class="flex-shrink-0 mr-8 whitespace-nowrap">
                <span class="font-semibold text-base">{{ news.title }}</span>
                {% if news.category == 'rates' %}
                    <span class="badge badge-sm badge-secondary ml-2">–ö—É—Ä—Å—ã</span>
                {% elif news.category == 'promotions' %}
                    <span class="badge badge-sm badge-accent ml-2">–ê–∫—Ü–∏—è</span>
                {% elif news.category == 'security' %}
                    <span class="badge badge-sm badge-error ml-2">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</span>
                {% elif news.category == 'services' %}
                    <span class="badge badge-sm badge-info ml-2">–£—Å–ª—É–≥–∏</span>
                {% elif news.category == 'general' %}
                    <span class="badge badge-sm badge-neutral ml-2">–ù–æ–≤–æ—Å—Ç–∏</span>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}


    {% include 'footer.html' %}

    <!-- JS marquee with persistent offset across pages -->
    <script>
    (function () {
        // Progressive image loader for service cards based on multiple sources
        function loadServiceImages() {
            const imgs = document.querySelectorAll('img.service-img[data-sources]');
            imgs.forEach(img => {
                try {
                    const sources = JSON.parse(img.getAttribute('data-sources'));
                    if (!Array.isArray(sources) || sources.length === 0) return;
                    let idx = 0;
                    const tryNext = () => {
                        if (idx >= sources.length) return;
                        const test = new Image();
                        test.onload = () => { img.src = sources[idx]; };
                        test.onerror = () => { idx += 1; tryNext(); };
                        test.referrerPolicy = 'no-referrer';
                        test.src = sources[idx];
                    };
                    tryNext();
                } catch {}
            });
        }

        const WRAP_ID = 'news-ticker';
        const TRACK_ID = 'news-ticker-track';
        const STORAGE_KEY = 'news_ticker_scroll';
        const SPEED_PX_PER_SEC = 60; // tune speed

        function initTicker() {
            const wrap = document.getElementById(WRAP_ID);
            const track = document.getElementById(TRACK_ID);
            if (!wrap || !track) return;

            // Disable CSS animation if present
            track.style.animation = 'none';

            // Duplicate content to ensure seamless loop
            if (!track._duplicated) {
                track.innerHTML = track.innerHTML + track.innerHTML;
                track._duplicated = true;
            }

            let offset = 0;
            let lastTs = performance.now();

            try {
                const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
                if (typeof saved.offset === 'number') offset = saved.offset;
            } catch {}

            function save(offsetVal) {
                try {
                    localStorage.setItem(STORAGE_KEY, JSON.stringify({ offset: offsetVal }));
                } catch {}
            }

            function contentWidth() {
                // Half because we duplicated once (two copies)
                return track.scrollWidth / 2;
            }

            function step(ts) {
                const dt = (ts - lastTs) / 1000;
                lastTs = ts;

                const width = contentWidth();
                if (width > 0) {
                    offset = (offset + SPEED_PX_PER_SEC * dt) % width;
                    track.style.transform = `translateX(${-offset}px)`;
                }

                requestAnimationFrame(step);
            }

            // Persist regularly and also on unload
            setInterval(() => save(offset), 2000);
            window.addEventListener('beforeunload', () => save(offset));

            requestAnimationFrame((ts) => {
                lastTs = ts;
                requestAnimationFrame(step);
            });
        }

        function initAll() { initTicker(); loadServiceImages(); }
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initAll);
        } else {
            initAll();
        }
    })();
    </script>

    <!-- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫—Ä–∞—Å–∏–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <script>
        // –ö—Ä–∞—Å–∏–≤—ã–µ toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showToast(type, message) {
            const toast = document.createElement('div');
            toast.className = 'toast toast-top toast-end';
            toast.style.zIndex = '9999';
            
            const alertClass = type === 'success' ? 'alert-success' : 
                              type === 'error' ? 'alert-error' : 
                              type === 'warning' ? 'alert-warning' : 'alert-info';
            
            const iconPath = type === 'success' 
                ? 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z'
                : type === 'error'
                ? 'M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z'
                : type === 'warning'
                ? 'M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z'
                : 'M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z';
            
            toast.innerHTML = `
                <div class="alert ${alertClass} shadow-lg">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${iconPath}"></path>
                    </svg>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 4000);
        }

        // –ö—Ä–∞—Å–∏–≤–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
        function showConfirmModal(title, message, onConfirm, onCancel = null) {
            // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            const modal = document.createElement('div');
            modal.className = 'modal modal-open';
            modal.style.zIndex = '10000';
            
            modal.innerHTML = `
                <div class="modal-box">
                    <h3 class="font-bold text-lg mb-4">${title}</h3>
                    <p class="py-4">${message}</p>
                    <div class="modal-action">
                        <button class="btn btn-primary" id="confirm-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                        <button class="btn btn-ghost" id="cancel-btn">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
                <div class="modal-backdrop" id="modal-backdrop"></div>
            `;
            
            document.body.appendChild(modal);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            document.getElementById('confirm-btn').onclick = function() {
                modal.remove();
                if (onConfirm) onConfirm();
            };
            
            document.getElementById('cancel-btn').onclick = function() {
                modal.remove();
                if (onCancel) onCancel();
            };
            
            document.getElementById('modal-backdrop').onclick = function() {
                modal.remove();
                if (onCancel) onCancel();
            };
        }

        // –ó–∞–º–µ–Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ confirm –Ω–∞ –∫—Ä–∞—Å–∏–≤—ã–π –º–æ–¥–∞–ª—å–Ω—ã–π –¥–∏–∞–ª–æ–≥
        function confirmAction(message, onConfirm, onCancel = null) {
            showConfirmModal('–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è', message, onConfirm, onCancel);
        }

        // –ó–∞–º–µ–Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ alert –Ω–∞ –∫—Ä–∞—Å–∏–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showAlert(message, type = 'info') {
            showToast(type, message);
        }
    </script>

