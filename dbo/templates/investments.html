{% extends "base.html" %}

{% block title %}–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <div class="hero bg-gradient-to-r from-accent to-primary text-primary-content rounded-lg mb-8">
        <div class="hero-content text-center">
            <div class="max-w-md">
                <h1 class="text-4xl font-bold mb-4">–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã</h1>
                <p class="text-lg opacity-90">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ —Å—á–µ—Ç–∞, –ü–ò–§—ã –∏ –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</p>
                <div class="badge badge-lg badge-accent mt-4">–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –¥–æ 15%</div>
            </div>
        </div>
    </div>

    <!-- –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
        <!-- –ò–ò–° -->
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title text-primary">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    –ò–ò–°
                </h2>
                <p class="text-base-content/70">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π —Å—á–µ—Ç —Å –Ω–∞–ª–æ–≥–æ–≤—ã–º–∏ –ª—å–≥–æ—Ç–∞–º–∏</p>
                <div class="stats stats-vertical shadow">
                    <div class="stat">
                        <div class="stat-title">–õ–∏–º–∏—Ç –≤–∑–Ω–æ—Å–∞</div>
                        <div class="stat-value text-primary">400 000 ‚ÇΩ</div>
                        <div class="stat-desc">–≤ –≥–æ–¥</div>
                    </div>
                    <div class="stat">
                        <div class="stat-title">–ù–∞–ª–æ–≥–æ–≤—ã–π –≤—ã—á–µ—Ç</div>
                        <div class="stat-value text-secondary">13%</div>
                        <div class="stat-desc">–¥–æ 52 000 ‚ÇΩ</div>
                    </div>
                </div>
                <div class="card-actions justify-end">
                    <button class="btn btn-primary" onclick="openInvestmentModal('iis')">–û—Ç–∫—Ä—ã—Ç—å –ò–ò–°</button>
                </div>
            </div>
        </div>

        <!-- –ü–ò–§ -->
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title text-secondary">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                    </svg>
                    –ü–ò–§
                </h2>
                <p class="text-base-content/70">–ü–∞–µ–≤—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–æ–Ω–¥—ã –¥–ª—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏</p>
                <div class="stats stats-vertical shadow">
                    <div class="stat">
                        <div class="stat-title">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞</div>
                        <div class="stat-value text-primary">1 000 ‚ÇΩ</div>
                        <div class="stat-desc">–¥–ª—è –≤—Ö–æ–¥–∞</div>
                    </div>
                    <div class="stat">
                        <div class="stat-title">–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –¥–æ</div>
                        <div class="stat-value text-secondary">12%</div>
                        <div class="stat-desc">–≥–æ–¥–æ–≤—ã—Ö</div>
                    </div>
                </div>
                <div class="card-actions justify-end">
                    <button class="btn btn-secondary" onclick="openInvestmentModal('pif')">–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –ë—Ä–æ–∫–µ—Ä—Å–∫–∏–π —Å—á–µ—Ç -->
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title text-accent">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                    </svg>
                    –ë—Ä–æ–∫–µ—Ä—Å–∫–∏–π —Å—á–µ—Ç
                </h2>
                <p class="text-base-content/70">–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è –Ω–∞ —Ñ–æ–Ω–¥–æ–≤–æ–º —Ä—ã–Ω–∫–µ</p>
                <div class="stats stats-vertical shadow">
                    <div class="stat">
                        <div class="stat-title">–ö–æ–º–∏—Å—Å–∏—è</div>
                        <div class="stat-value text-primary">0.05%</div>
                        <div class="stat-desc">–∑–∞ —Å–¥–µ–ª–∫—É</div>
                    </div>
                    <div class="stat">
                        <div class="stat-title">–î–æ—Å—Ç—É–ø –∫</div>
                        <div class="stat-value text-secondary">5000+</div>
                        <div class="stat-desc">–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º</div>
                    </div>
                </div>
                <div class="card-actions justify-end">
                    <button class="btn btn-accent" onclick="openInvestmentModal('brokerage')">–û—Ç–∫—Ä—ã—Ç—å —Å—á–µ—Ç</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ -->
    <div class="card bg-base-100 shadow-xl mb-8">
        <div class="card-body">
            <h2 class="card-title text-2xl mb-4">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                </svg>
                –ú–æ–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
            </h2>
            
            {% if investments %}
            <div class="overflow-x-auto">
                <table class="table table-zebra w-full">
                    <thead>
                        <tr>
                            <th>–ü—Ä–æ–¥—É–∫—Ç</th>
                            <th>–¢–∏–ø</th>
                            <th>–°—É–º–º–∞ –≤–ª–æ–∂–µ–Ω–∏–π</th>
                            <th>–¢–µ–∫—É—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</th>
                            <th>–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for investment in investments %}
                        <tr>
                            <td class="font-bold">{{ investment.product.name }}</td>
                            <td>
                                <span class="badge badge-outline">
                                    {% if investment.product.product_type == 'iis' %}–ò–ò–°
                                    {% elif investment.product.product_type == 'pif' %}–ü–ò–§
                                    {% elif investment.product.product_type == 'brokerage' %}–ë—Ä–æ–∫–µ—Ä—Å–∫–∏–π
                                    {% endif %}
                                </span>
                            </td>
                            <td>{{ investment.amount|floatformat:0 }} ‚ÇΩ</td>
                            <td class="font-bold">{{ investment.current_value|floatformat:0 }} ‚ÇΩ</td>
                            <td class="{% if investment.current_value > investment.amount %}text-success{% else %}text-error{% endif %}">
                                {% widthratio investment.current_value investment.amount 100 as yield %}
                                {% if investment.current_value > investment.amount %}+{% endif %}{{ yield|add:"-100" }}%
                            </td>
                            <td>
                                {% if investment.status == 'active' %}
                                    <span class="badge badge-success">–ê–∫—Ç–∏–≤–Ω–∞—è</span>
                                {% elif investment.status == 'sold' %}
                                    <span class="badge badge-info">–ü—Ä–æ–¥–∞–Ω–Ω–∞—è</span>
                                {% endif %}
                            </td>
                            <td>
                                <div class="flex gap-2">
                                    <button class="btn btn-sm btn-primary" onclick="viewInvestmentDetails({{ investment.id }})">–î–µ—Ç–∞–ª–∏</button>
                                    {% if investment.status == 'active' %}
                                        <button class="btn btn-sm btn-secondary" onclick="sellInvestment({{ investment.id }})">–ü—Ä–æ–¥–∞—Ç—å</button>
                                    {% endif %}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="text-center py-8">
                <svg class="w-16 h-16 mx-auto text-base-content/30 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                </svg>
                <h3 class="text-xl font-semibold mb-2">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π</h3>
                <p class="text-base-content/70 mb-4">–ù–∞—á–Ω–∏—Ç–µ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–∏—É–º–Ω–æ–∂–∞–π—Ç–µ —Å–≤–æ–∏ —Å–±–µ—Ä–µ–∂–µ–Ω–∏—è</p>
                <button class="btn btn-primary" onclick="openInvestmentModal('iis')">–ù–∞—á–∞—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- –ü–æ—Ä—Ç—Ñ–µ–ª—å -->
    <div class="card bg-base-100 shadow-xl mb-8">
        <div class="card-body">
            <h2 class="card-title text-2xl mb-4">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
                –ú–æ–π –ø–æ—Ä—Ç—Ñ–µ–ª—å
            </h2>
            <div class="stats stats-vertical shadow">
                <div class="stat">
                    <div class="stat-title">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—è</div>
                    <div class="stat-value text-primary">1 250 000 ‚ÇΩ</div>
                    <div class="stat-desc">+5.2% –∑–∞ –º–µ—Å—è—Ü</div>
                </div>
                <div class="stat">
                    <div class="stat-title">–û–±—â–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å</div>
                    <div class="stat-value text-success">+15.8%</div>
                    <div class="stat-desc">—Å –Ω–∞—á–∞–ª–∞ –≥–æ–¥–∞</div>
                </div>
                <div class="stat">
                    <div class="stat-title">–î–∏–≤–∏–¥–µ–Ω–¥—ã –ø–æ–ª—É—á–µ–Ω–æ</div>
                    <div class="stat-value text-info">45 000 ‚ÇΩ</div>
                    <div class="stat-desc">–∑–∞ —Ç–µ–∫—É—â–∏–π –≥–æ–¥</div>
                </div>
            </div>
        </div>
    </div>

    <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
    <div class="card bg-base-100 shadow-xl mb-8">
        <div class="card-body">
            <h2 class="card-title text-2xl mb-4">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                </svg>
                –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="card bg-gradient-to-br from-primary to-secondary text-primary-content">
                    <div class="card-body">
                        <h3 class="card-title text-lg">–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å</h3>
                        <p class="text-sm opacity-90">–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫, —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥</p>
                        <div class="card-actions justify-end">
                            <button class="btn btn-sm btn-primary" onclick="createPortfolio('conservative')">–°–æ–∑–¥–∞—Ç—å</button>
                        </div>
                    </div>
                </div>
                <div class="card bg-gradient-to-br from-secondary to-accent text-primary-content">
                    <div class="card-body">
                        <h3 class="card-title text-lg">–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å</h3>
                        <p class="text-sm opacity-90">–£–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–∏—Å–∫ –∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å</p>
                        <div class="card-actions justify-end">
                            <button class="btn btn-sm btn-secondary" onclick="createPortfolio('balanced')">–°–æ–∑–¥–∞—Ç—å</button>
                        </div>
                    </div>
                </div>
                <div class="card bg-gradient-to-br from-accent to-error text-primary-content">
                    <div class="card-body">
                        <h3 class="card-title text-lg">–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å</h3>
                        <p class="text-sm opacity-90">–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫, –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥</p>
                        <div class="card-actions justify-end">
                            <button class="btn btn-sm btn-accent" onclick="createPortfolio('aggressive')">–°–æ–∑–¥–∞—Ç—å</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã -->
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <h2 class="card-title text-2xl mb-4">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
                –û–±—É—á–µ–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="text-center p-4 hover:bg-base-200 rounded-lg cursor-pointer" onclick="openEducation('basics')">
                    <div class="text-3xl mb-2">üìö</div>
                    <h3 class="font-semibold mb-1">–û—Å–Ω–æ–≤—ã –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
                    <p class="text-sm text-base-content/70">–ë–∞–∑–æ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è</p>
                </div>
                <div class="text-center p-4 hover:bg-base-200 rounded-lg cursor-pointer" onclick="openEducation('analysis')">
                    <div class="text-3xl mb-2">üìä</div>
                    <h3 class="font-semibold mb-1">–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞</h3>
                    <p class="text-sm text-base-content/70">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑</p>
                </div>
                <div class="text-center p-4 hover:bg-base-200 rounded-lg cursor-pointer" onclick="openEducation('portfolio')">
                    <div class="text-3xl mb-2">üéØ</div>
                    <h3 class="font-semibold mb-1">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º</h3>
                    <p class="text-sm text-base-content/70">–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è</p>
                </div>
                <div class="text-center p-4 hover:bg-base-200 rounded-lg cursor-pointer" onclick="openEducation('taxes')">
                    <div class="text-3xl mb-2">üí∞</div>
                    <h3 class="font-semibold mb-1">–ù–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏–µ</h3>
                    <p class="text-sm text-base-content/70">–ù–∞–ª–æ–≥–∏ —Å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
<div id="investmentModal" class="modal">
    <div class="modal-box">
        <h3 class="font-bold text-lg mb-4" id="investmentModalTitle">–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
        <form id="investmentForm">
            <div class="form-control mb-4">
                <label class="label">
                    <span class="label-text">–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞</span>
                </label>
                <select class="select select-bordered" name="product_type" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞</option>
                    <option value="iis">–ò–ò–°</option>
                    <option value="pif">–ü–ò–§</option>
                    <option value="brokerage">–ë—Ä–æ–∫–µ—Ä—Å–∫–∏–π —Å—á–µ—Ç</option>
                </select>
            </div>
            <div class="form-control mb-4">
                <label class="label">
                    <span class="label-text">–°—É–º–º–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</span>
                </label>
                <input type="number" class="input input-bordered" name="amount" placeholder="100000" min="1000" max="10000000" required>
            </div>
            <div class="form-control mb-4">
                <label class="label">
                    <span class="label-text">–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞</span>
                </label>
                <select class="select select-bordered" name="risk_level" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞</option>
                    <option value="low">–ù–∏–∑–∫–∏–π</option>
                    <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
                    <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                </select>
            </div>
            <div class="form-control mb-4">
                <label class="label">
                    <span class="label-text">–°—á–µ—Ç –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è</span>
                </label>
                <select class="select select-bordered" name="account" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—á–µ—Ç</option>
                    {% for account in accounts %}
                        <option value="{{ account.id }}">{{ account.account_number }} ({{ account.balance|floatformat:0 }} ‚ÇΩ)</option>
                    {% endfor %}
                </select>
            </div>
            <div class="modal-action">
                <button type="button" class="btn btn-ghost" onclick="closeInvestmentModal()">–û—Ç–º–µ–Ω–∞</button>
                <button type="submit" class="btn btn-primary">–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
        </form>
    </div>
</div>

<script>
function openInvestmentModal(type) {
    const modal = document.getElementById('investmentModal');
    const title = document.getElementById('investmentModalTitle');
    
    switch(type) {
        case 'iis':
            title.textContent = '–û—Ç–∫—Ä—ã—Ç–∏–µ –ò–ò–°';
            break;
        case 'pif':
            title.textContent = '–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ü–ò–§';
            break;
        case 'brokerage':
            title.textContent = '–û—Ç–∫—Ä—ã—Ç–∏–µ –±—Ä–æ–∫–µ—Ä—Å–∫–æ–≥–æ —Å—á–µ—Ç–∞';
            break;
    }
    
    modal.classList.add('modal-open');
}

function closeInvestmentModal() {
    document.getElementById('investmentModal').classList.remove('modal-open');
}

function viewInvestmentDetails(investmentId) {
    showAlert('–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ #' + investmentId, 'info');
}

function sellInvestment(investmentId) {
    confirmAction(
        '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–∞—Ç—å —ç—Ç—É –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—é?',
        function() {
            showAlert('–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –ø—Ä–æ–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ!', 'success');
        }
    );
}

function createPortfolio(type) {
    const portfolioNames = {
        'conservative': '–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å',
        'balanced': '–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å',
        'aggressive': '–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å'
    };
    
    showAlert('–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è: ' + portfolioNames[type], 'info');
}

function openEducation(topic) {
    const topics = {
        'basics': '–û—Å–Ω–æ–≤—ã –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è',
        'analysis': '–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞',
        'portfolio': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º',
        'taxes': '–ù–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏–µ'
    };
    
    showAlert('–û—Ç–∫—Ä—ã—Ç–∏–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞: ' + topics[topic], 'info');
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
document.getElementById('investmentForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const formData = new FormData(this);
    
    showAlert('–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ! –°—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –≤–∞—à–µ–º —Å—á–µ—Ç–µ.', 'success');
    closeInvestmentModal();
    this.reset();
});
</script>
{% endblock %}