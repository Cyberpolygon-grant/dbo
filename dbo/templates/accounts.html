
{% extends "base.html" %}

{% block title %}–†–∞—Å—á–µ—Ç–Ω–æ-–∫–∞—Å—Å–æ–≤–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <div class="hero bg-gradient-to-r from-primary to-secondary text-primary-content rounded-lg mb-8">
        <div class="hero-content text-center">
            <div class="max-w-md">
                <h1 class="text-4xl font-bold mb-4">–†–∞—Å—á–µ—Ç–Ω–æ-–∫–∞—Å—Å–æ–≤–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</h1>
                <p class="text-lg opacity-90">–û—Ç–∫—Ä—ã—Ç–∏–µ –∏ –≤–µ–¥–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–Ω—ã—Ö —Å—á–µ—Ç–æ–≤, –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π –∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤</p>
                <div class="badge badge-lg badge-accent mt-4">–î–æ—Å—Ç—É–ø–Ω–æ –æ–Ω–ª–∞–π–Ω</div>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —É—Å–ª—É–≥–∏ -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
        <!-- –û—Ç–∫—Ä—ã—Ç–∏–µ —Å—á–µ—Ç–∞ -->
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title text-primary">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                    </svg>
                    –û—Ç–∫—Ä—ã—Ç–∏–µ —Å—á–µ—Ç–∞
                </h2>
                <p class="text-base-content/70">–ë—ã—Å—Ç—Ä–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ —Ä–∞—Å—á–µ—Ç–Ω–æ–≥–æ —Å—á–µ—Ç–∞ –¥–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü</p>
                <div class="card-actions justify-end">
                    <button class="btn btn-primary" onclick="openAccountModal()">–û—Ç–∫—Ä—ã—Ç—å —Å—á–µ—Ç</button>
                </div>
            </div>
        </div>

        <!-- –í–µ–¥–µ–Ω–∏–µ —Å—á–µ—Ç–∞ -->
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title text-secondary">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    –í–µ–¥–µ–Ω–∏–µ —Å—á–µ—Ç–∞
                </h2>
                <p class="text-base-content/70">–ü–æ–ª–Ω–æ–µ –≤–µ–¥–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–Ω–æ–≥–æ —Å—á–µ—Ç–∞ —Å –≤—ã–ø–∏—Å–∫–∞–º–∏ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å—é</p>
                <div class="card-actions justify-end">
                    <button class="btn btn-secondary" onclick="viewAccountManagement()">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
                </div>
            </div>
        </div>

        <!-- –ü–ª–∞—Ç–µ–∂–∏ –∏ –ø–µ—Ä–µ–≤–æ–¥—ã -->
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title text-accent">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path>
                    </svg>
                    –ü–ª–∞—Ç–µ–∂–∏ –∏ –ø–µ—Ä–µ–≤–æ–¥—ã
                </h2>
                <p class="text-base-content/70">–ë—ã—Å—Ç—Ä—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –∏ –ø–µ—Ä–µ–≤–æ–¥—ã –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏</p>
                <div class="card-actions justify-end">
                    <button class="btn btn-accent" onclick="makePayment()">–°–¥–µ–ª–∞—Ç—å –ø–ª–∞—Ç–µ–∂</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–∏ —Å—á–µ—Ç–∞ -->
    <div class="card bg-base-100 shadow-xl mb-8">
        <div class="card-body">
            <h2 class="card-title text-2xl mb-4">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                </svg>
                –ú–æ–∏ —Å—á–µ—Ç–∞
            </h2>
            
            {% if accounts %}
            <div class="overflow-x-auto">
                <table class="table table-zebra w-full">
                    <thead>
                        <tr>
                            <th>–ù–æ–º–µ—Ä —Å—á–µ—Ç–∞</th>
                            <th>–¢–∏–ø —Å—á–µ—Ç–∞</th>
                            <th>–ë–∞–ª–∞–Ω—Å</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for account in accounts %}
                        <tr>
                            <td class="font-mono">{{ account.account_number }}</td>
                            <td>
                                <span class="badge badge-outline">
                                    {% if account.account_type == 'checking' %}–¢–µ–∫—É—â–∏–π
                                    {% elif account.account_type == 'savings' %}–°–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–π
                                    {% elif account.account_type == 'deposit' %}–î–µ–ø–æ–∑–∏—Ç–Ω—ã–π
                                    {% endif %}
                                </span>
                            </td>
                            <td class="font-bold text-lg">{{ account.balance|floatformat:2 }} ‚ÇΩ</td>
                            <td>
                                {% if account.is_active %}
                                    <span class="badge badge-success">–ê–∫—Ç–∏–≤–µ–Ω</span>
                                {% else %}
                                    <span class="badge badge-error">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</span>
                                {% endif %}
                            </td>
                            <td>
                                <div class="flex gap-2">
                                    <button class="btn btn-sm btn-primary" onclick="viewAccountDetails({{ account.id }})">–î–µ—Ç–∞–ª–∏</button>
                                    <button class="btn btn-sm btn-secondary" onclick="viewStatements({{ account.id }})">–í—ã–ø–∏—Å–∫–∏</button>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="text-center py-8">
                <svg class="w-16 h-16 mx-auto text-base-content/30 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                </svg>
                <h3 class="text-xl font-semibold mb-2">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å—á–µ—Ç–æ–≤</h3>
                <p class="text-base-content/70 mb-4">–û—Ç–∫—Ä–æ–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π —Ä–∞—Å—á–µ—Ç–Ω—ã–π —Å—á–µ—Ç –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã</p>
                <button class="btn btn-primary" onclick="openAccountModal()">–û—Ç–∫—Ä—ã—Ç—å —Å—á–µ—Ç</button>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ -->
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <h2 class="card-title text-2xl mb-6">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–∞—à–µ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="text-center">
                    <div class="text-3xl mb-2">‚ö°</div>
                    <h3 class="font-semibold mb-1">–ë—ã—Å—Ç—Ä–æ</h3>
                    <p class="text-sm text-base-content/70">–û—Ç–∫—Ä—ã—Ç–∏–µ —Å—á–µ—Ç–∞ –∑–∞ 1 –¥–µ–Ω—å</p>
                </div>
                <div class="text-center">
                    <div class="text-3xl mb-2">üí∞</div>
                    <h3 class="font-semibold mb-1">–í—ã–≥–æ–¥–Ω–æ</h3>
                    <p class="text-sm text-base-content/70">–ù–∏–∑–∫–∏–µ —Ç–∞—Ä–∏—Ñ—ã –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</p>
                </div>
                <div class="text-center">
                    <div class="text-3xl mb-2">üîí</div>
                    <h3 class="font-semibold mb-1">–ë–µ–∑–æ–ø–∞—Å–Ω–æ</h3>
                    <p class="text-sm text-base-content/70">–ó–∞—â–∏—Ç–∞ —Å—Ä–µ–¥—Å—Ç–≤ –∏ –¥–∞–Ω–Ω—ã—Ö</p>
                </div>
                <div class="text-center">
                    <div class="text-3xl mb-2">üì±</div>
                    <h3 class="font-semibold mb-1">–£–¥–æ–±–Ω–æ</h3>
                    <p class="text-sm text-base-content/70">–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –æ–Ω–ª–∞–π–Ω</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Å—á–µ—Ç–∞ -->
<div id="openAccountModal" class="modal">
    <div class="modal-box">
        <h3 class="font-bold text-lg mb-4">–û—Ç–∫—Ä—ã—Ç–∏–µ —Ä–∞—Å—á–µ—Ç–Ω–æ–≥–æ —Å—á–µ—Ç–∞</h3>
        <form id="openAccountForm" method="post" action="{% url 'create_bank_account' %}">
            {% csrf_token %}
            <div class="form-control mb-4">
                <label class="label">
                    <span class="label-text">–¢–∏–ø —Å—á–µ—Ç–∞</span>
                </label>
                <select class="select select-bordered" name="account_type" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Å—á–µ—Ç–∞</option>
                    <option value="checking">–¢–µ–∫—É—â–∏–π —Å—á–µ—Ç</option>
                    <option value="savings">–°–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å—á–µ—Ç</option>
                </select>
            </div>
            <div class="form-control mb-4">
                <label class="label">
                    <span class="label-text">–ù–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å</span>
                </label>
                <input type="number" class="input input-bordered" name="initial_deposit" placeholder="0" min="0" step="0.01">
            </div>
            <div class="modal-action">
                <button type="button" class="btn btn-ghost" onclick="closeAccountModal()">–û—Ç–º–µ–Ω–∞</button>
                <input type="hidden" name="next" value="{% url 'accounts' %}">
                <button type="submit" class="btn btn-primary">–û—Ç–∫—Ä—ã—Ç—å —Å—á–µ—Ç</button>
            </div>
        </form>
    </div>
</div>

<script>
function openAccountModal() {
    document.getElementById('openAccountModal').classList.add('modal-open');
}

function closeAccountModal() {
    document.getElementById('openAccountModal').classList.remove('modal-open');
}

function viewAccountDetails(accountId) {
    // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π —Å—á–µ—Ç–∞
    showAlert('–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π —Å—á–µ—Ç–∞ #' + accountId, 'info');
}

function viewStatements(accountId) {
    // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—ã–ø–∏—Å–æ–∫
    showAlert('–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—ã–ø–∏—Å–æ–∫ –ø–æ —Å—á–µ—Ç—É #' + accountId, 'info');
}

function viewAccountManagement() {
    // –°–∏–º—É–ª—è—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç–æ–º
    showAlert('–ü–µ—Ä–µ—Ö–æ–¥ –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å—á–µ—Ç–æ–º', 'info');
}

function makePayment() {
    // –°–∏–º—É–ª—è—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞
    showAlert('–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞', 'info');
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –æ—Ç–∫—Ä—ã—Ç–∏—è —Å—á–µ—Ç–∞
// –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º –∏ toast –∏–∑ messages
</script>
{% endblock %}