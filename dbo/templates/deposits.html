{% extends "base.html" %}

{% block title %}–î–µ–ø–æ–∑–∏—Ç–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <div class="hero bg-gradient-to-r from-info to-success text-primary-content rounded-lg mb-8">
        <div class="hero-content text-center">
            <div class="max-w-md">
                <h1 class="text-4xl font-bold mb-4">–î–µ–ø–æ–∑–∏—Ç–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã</h1>
                <p class="text-lg opacity-90">–í—ã–≥–æ–¥–Ω—ã–µ –¥–µ–ø–æ–∑–∏—Ç—ã —Å –≤—ã—Å–æ–∫–∏–º–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–º–∏ —Å—Ç–∞–≤–∫–∞–º–∏ –∏ –≥–∏–±–∫–∏–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏</p>
                <div class="badge badge-lg badge-accent mt-4">–î–æ 8% –≥–æ–¥–æ–≤—ã—Ö</div>
            </div>
        </div>
    </div>

    <!-- –î–µ–ø–æ–∑–∏—Ç–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
        <!-- –°—Ä–æ—á–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç -->
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title text-primary">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    –°—Ä–æ—á–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç
                </h2>
                <p class="text-base-content/70">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –¥–µ–ø–æ–∑–∏—Ç —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç–∞–≤–∫–æ–π</p>
                <div class="stats stats-vertical shadow">
                    <div class="stat">
                        <div class="stat-title">–°—Ç–∞–≤–∫–∞ –¥–æ</div>
                        <div class="stat-value text-primary">8.0%</div>
                        <div class="stat-desc">–≥–æ–¥–æ–≤—ã—Ö</div>
                    </div>
                    <div class="stat">
                        <div class="stat-title">–°—Ä–æ–∫ –æ—Ç</div>
                        <div class="stat-value text-secondary">3</div>
                        <div class="stat-desc">–º–µ—Å—è—Ü–µ–≤</div>
                    </div>
                </div>
                <div class="card-actions justify-end">
                    <button class="btn btn-primary" onclick="openDepositModal('term')">–û—Ç–∫—Ä—ã—Ç—å –¥–µ–ø–æ–∑–∏—Ç</button>
                </div>
            </div>
        </div>

        <!-- –ü–æ–ø–æ–ª–Ω—è–µ–º—ã–π –¥–µ–ø–æ–∑–∏—Ç -->
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title text-secondary">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                    –ü–æ–ø–æ–ª–Ω—è–µ–º—ã–π –¥–µ–ø–æ–∑–∏—Ç
                </h2>
                <p class="text-base-content/70">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Ç–µ—á–µ–Ω–∏–µ —Å—Ä–æ–∫–∞</p>
                <div class="stats stats-vertical shadow">
                    <div class="stat">
                        <div class="stat-title">–°—Ç–∞–≤–∫–∞ –¥–æ</div>
                        <div class="stat-value text-primary">7.5%</div>
                        <div class="stat-desc">–≥–æ–¥–æ–≤—ã—Ö</div>
                    </div>
                    <div class="stat">
                        <div class="stat-title">–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</div>
                        <div class="stat-value text-secondary">–î–∞</div>
                        <div class="stat-desc">–≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è</div>
                    </div>
                </div>
                <div class="card-actions justify-end">
                    <button class="btn btn-secondary" onclick="openDepositModal('replenishable')">–û—Ç–∫—Ä—ã—Ç—å –¥–µ–ø–æ–∑–∏—Ç</button>
                </div>
            </div>
        </div>

        <!-- –°–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å—á–µ—Ç -->
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title text-accent">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                    </svg>
                    –°–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å—á–µ—Ç
                </h2>
                <p class="text-base-content/70">–ì–∏–±–∫–∏–π –¥–æ—Å—Ç—É–ø –∫ —Å—Ä–µ–¥—Å—Ç–≤–∞–º —Å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤</p>
                <div class="stats stats-vertical shadow">
                    <div class="stat">
                        <div class="stat-title">–°—Ç–∞–≤–∫–∞ –¥–æ</div>
                        <div class="stat-value text-primary">6.0%</div>
                        <div class="stat-desc">–≥–æ–¥–æ–≤—ã—Ö</div>
                    </div>
                    <div class="stat">
                        <div class="stat-title">–î–æ—Å—Ç—É–ø</div>
                        <div class="stat-value text-secondary">–°–≤–æ–±–æ–¥–Ω—ã–π</div>
                        <div class="stat-desc">–∫ —Å—Ä–µ–¥—Å—Ç–≤–∞–º</div>
                    </div>
                </div>
                <div class="card-actions justify-end">
                    <button class="btn btn-accent" onclick="openDepositModal('savings')">–û—Ç–∫—Ä—ã—Ç—å —Å—á–µ—Ç</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–∏ –¥–µ–ø–æ–∑–∏—Ç—ã -->
    <div class="card bg-base-100 shadow-xl mb-8">
        <div class="card-body">
            <h2 class="card-title text-2xl mb-4">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                </svg>
                –ú–æ–∏ –¥–µ–ø–æ–∑–∏—Ç—ã
            </h2>
            
            {% if deposits %}
            <div class="overflow-x-auto">
                <table class="table table-zebra w-full">
                    <thead>
                        <tr>
                            <th>–¢–∏–ø –¥–µ–ø–æ–∑–∏—Ç–∞</th>
                            <th>–°—É–º–º–∞</th>
                            <th>–°—Ç–∞–≤–∫–∞</th>
                            <th>–°—Ä–æ–∫</th>
                            <th>–î–∞—Ç–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è</th>
                            <th>–î–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è</th>
                            <th>–î–æ—Ö–æ–¥</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for deposit in deposits %}
                        <tr>
                            <td>
                                <span class="badge badge-outline">
                                    {% if deposit.account.account_type == 'savings' %}–°–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–π
                                    {% elif deposit.account.account_type == 'deposit' %}–î–µ–ø–æ–∑–∏—Ç–Ω—ã–π
                                    {% endif %}
                                </span>
                            </td>
                            <td class="font-bold">{{ deposit.amount|floatformat:0 }} ‚ÇΩ</td>
                            <td>{{ deposit.interest_rate }}%</td>
                            <td>{{ deposit.term_months }} –º–µ—Å.</td>
                            <td>{{ deposit.start_date|date:"d.m.Y" }}</td>
                            <td>{{ deposit.end_date|date:"d.m.Y" }}</td>
                            <td class="font-bold text-success">
                                {% widthratio deposit.amount deposit.interest_rate 100 as income %}
                                {{ income|floatformat:0 }} ‚ÇΩ
                            </td>
                            <td>
                                <div class="flex gap-2">
                                    <button class="btn btn-sm btn-primary" onclick="viewDepositDetails({{ deposit.id }})">–î–µ—Ç–∞–ª–∏</button>
                                    {% if deposit.end_date > today %}
                                        <button class="btn btn-sm btn-secondary" onclick="replenishDeposit({{ deposit.id }})">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
                                    {% endif %}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="text-center py-8">
                <svg class="w-16 h-16 mx-auto text-base-content/30 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                </svg>
                <h3 class="text-xl font-semibold mb-2">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –¥–µ–ø–æ–∑–∏—Ç–æ–≤</h3>
                <p class="text-base-content/70 mb-4">–û—Ç–∫—Ä–æ–π—Ç–µ –¥–µ–ø–æ–∑–∏—Ç –∏ –Ω–∞—á–Ω–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Ö–æ–¥ —Å –≤–∞—à–∏—Ö —Å–±–µ—Ä–µ–∂–µ–Ω–∏–π</p>
                <button class="btn btn-primary" onclick="openDepositModal('term')">–û—Ç–∫—Ä—ã—Ç—å –¥–µ–ø–æ–∑–∏—Ç</button>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–µ–ø–æ–∑–∏—Ç–∞ -->
    <div class="card bg-base-100 shadow-xl mb-8">
        <div class="card-body">
            <h2 class="card-title text-2xl mb-4">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                </svg>
                –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–µ–ø–æ–∑–∏—Ç–∞
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="form-control">
                    <label class="label">
                        <span class="label-text">–°—É–º–º–∞ –¥–µ–ø–æ–∑–∏—Ç–∞</span>
                    </label>
                    <input type="number" id="depositAmount" class="input input-bordered" placeholder="100000" min="1000" max="10000000">
                </div>
                <div class="form-control">
                    <label class="label">
                        <span class="label-text">–°—Ä–æ–∫ –¥–µ–ø–æ–∑–∏—Ç–∞ (–º–µ—Å—è—Ü—ã)</span>
                    </label>
                    <input type="number" id="depositTerm" class="input input-bordered" placeholder="12" min="1" max="60">
                </div>
                <div class="form-control">
                    <label class="label">
                        <span class="label-text">–ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞</span>
                    </label>
                    <input type="number" id="depositRate" class="input input-bordered" placeholder="8.0" min="1" max="15" step="0.1">
                </div>
                <div class="form-control">
                    <label class="label">
                        <span class="label-text">–¢–∏–ø –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è</span>
                    </label>
                    <select id="interestType" class="select select-bordered">
                        <option value="monthly">–ï–∂–µ–º–µ—Å—è—á–Ω–æ</option>
                        <option value="quarterly">–ï–∂–µ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ</option>
                        <option value="yearly">–ï–∂–µ–≥–æ–¥–Ω–æ</option>
                        <option value="end">–í –∫–æ–Ω—Ü–µ —Å—Ä–æ–∫–∞</option>
                    </select>
                </div>
            </div>
            <div class="card-actions justify-center mt-6">
                <button class="btn btn-primary" onclick="calculateDeposit()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
            </div>
            
            <div id="depositCalculationResult" class="mt-6 hidden">
                <div class="stats stats-vertical shadow">
                    <div class="stat">
                        <div class="stat-title">–°—É–º–º–∞ –∫ –ø–æ–ª—É—á–µ–Ω–∏—é</div>
                        <div class="stat-value text-primary" id="totalAmount">0 ‚ÇΩ</div>
                    </div>
                    <div class="stat">
                        <div class="stat-title">–î–æ—Ö–æ–¥ –ø–æ –¥–µ–ø–æ–∑–∏—Ç—É</div>
                        <div class="stat-value text-success" id="depositIncome">0 ‚ÇΩ</div>
                    </div>
                    <div class="stat">
                        <div class="stat-title">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Å—Ç–∞–≤–∫–∞</div>
                        <div class="stat-value text-info" id="effectiveRate">0%</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ -->
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <h2 class="card-title text-2xl mb-6">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–∞—à–∏—Ö –¥–µ–ø–æ–∑–∏—Ç–æ–≤</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="text-center">
                    <div class="text-3xl mb-2">üí∞</div>
                    <h3 class="font-semibold mb-1">–í—ã—Å–æ–∫–∏–µ —Å—Ç–∞–≤–∫–∏</h3>
                    <p class="text-sm text-base-content/70">–î–æ 8% –≥–æ–¥–æ–≤—ã—Ö</p>
                </div>
                <div class="text-center">
                    <div class="text-3xl mb-2">üîí</div>
                    <h3 class="font-semibold mb-1">–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å</h3>
                    <p class="text-sm text-base-content/70">–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≤–∫–ª–∞–¥–æ–≤</p>
                </div>
                <div class="text-center">
                    <div class="text-3xl mb-2">üì±</div>
                    <h3 class="font-semibold mb-1">–£–¥–æ–±—Å—Ç–≤–æ</h3>
                    <p class="text-sm text-base-content/70">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω</p>
                </div>
                <div class="text-center">
                    <div class="text-3xl mb-2">‚ö°</div>
                    <h3 class="font-semibold mb-1">–ë—ã—Å—Ç—Ä–æ</h3>
                    <p class="text-sm text-base-content/70">–û—Ç–∫—Ä—ã—Ç–∏–µ –∑–∞ 5 –º–∏–Ω—É—Ç</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–µ–ø–æ–∑–∏—Ç–∞ -->
<div id="depositModal" class="modal">
    <div class="modal-box">
        <h3 class="font-bold text-lg mb-4" id="depositModalTitle">–û—Ç–∫—Ä—ã—Ç–∏–µ –¥–µ–ø–æ–∑–∏—Ç–∞</h3>
        <form id="depositForm">
            <div class="form-control mb-4">
                <label class="label">
                    <span class="label-text">–¢–∏–ø –¥–µ–ø–æ–∑–∏—Ç–∞</span>
                </label>
                <select class="select select-bordered" name="deposit_type" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –¥–µ–ø–æ–∑–∏—Ç–∞</option>
                    <option value="term">–°—Ä–æ—á–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç</option>
                    <option value="replenishable">–ü–æ–ø–æ–ª–Ω—è–µ–º—ã–π –¥–µ–ø–æ–∑–∏—Ç</option>
                    <option value="savings">–°–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å—á–µ—Ç</option>
                </select>
            </div>
            <div class="form-control mb-4">
                <label class="label">
                    <span class="label-text">–°—É–º–º–∞ –¥–µ–ø–æ–∑–∏—Ç–∞</span>
                </label>
                <input type="number" class="input input-bordered" name="amount" placeholder="100000" min="1000" max="10000000" required>
            </div>
            <div class="form-control mb-4">
                <label class="label">
                    <span class="label-text">–°—Ä–æ–∫ –¥–µ–ø–æ–∑–∏—Ç–∞ (–º–µ—Å—è—Ü—ã)</span>
                </label>
                <input type="number" class="input input-bordered" name="term" placeholder="12" min="1" max="60" required>
            </div>
            <div class="form-control mb-4">
                <label class="label">
                    <span class="label-text">–°—á–µ—Ç –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è</span>
                </label>
                <select class="select select-bordered" name="account" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—á–µ—Ç</option>
                    {% for account in accounts %}
                        <option value="{{ account.id }}">{{ account.account_number }} ({{ account.balance|floatformat:0 }} ‚ÇΩ)</option>
                    {% endfor %}
                </select>
            </div>
            <div class="modal-action">
                <button type="button" class="btn btn-ghost" onclick="closeDepositModal()">–û—Ç–º–µ–Ω–∞</button>
                <button type="submit" class="btn btn-primary">–û—Ç–∫—Ä—ã—Ç—å –¥–µ–ø–æ–∑–∏—Ç</button>
            </div>
        </form>
    </div>
</div>

<script>
function openDepositModal(type) {
    const modal = document.getElementById('depositModal');
    const title = document.getElementById('depositModalTitle');
    
    switch(type) {
        case 'term':
            title.textContent = '–û—Ç–∫—Ä—ã—Ç–∏–µ —Å—Ä–æ—á–Ω–æ–≥–æ –¥–µ–ø–æ–∑–∏—Ç–∞';
            break;
        case 'replenishable':
            title.textContent = '–û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –¥–µ–ø–æ–∑–∏—Ç–∞';
            break;
        case 'savings':
            title.textContent = '–û—Ç–∫—Ä—ã—Ç–∏–µ —Å–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Å—á–µ—Ç–∞';
            break;
    }
    
    modal.classList.add('modal-open');
}

function closeDepositModal() {
    document.getElementById('depositModal').classList.remove('modal-open');
}

function viewDepositDetails(depositId) {
    showAlert('–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –¥–µ–ø–æ–∑–∏—Ç–∞ #' + depositId, 'info');
}

function replenishDeposit(depositId) {
    showAlert('–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–ø–æ–∑–∏—Ç–∞ #' + depositId, 'info');
}

function calculateDeposit() {
    const amount = parseFloat(document.getElementById('depositAmount').value) || 0;
    const term = parseInt(document.getElementById('depositTerm').value) || 0;
    const rate = parseFloat(document.getElementById('depositRate').value) || 0;
    const interestType = document.getElementById('interestType').value;
    
    if (amount <= 0 || term <= 0 || rate <= 0) {
        showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'warning');
        return;
    }
    
    const monthlyRate = rate / 100 / 12;
    let totalAmount, income, effectiveRate;
    
    if (interestType === 'monthly') {
        // –ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è
        totalAmount = amount * Math.pow(1 + monthlyRate, term);
        income = totalAmount - amount;
        effectiveRate = (Math.pow(1 + monthlyRate, 12) - 1) * 100;
    } else if (interestType === 'quarterly') {
        // –ï–∂–µ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–∞—è –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è
        const quarterlyRate = rate / 100 / 4;
        const quarters = Math.ceil(term / 3);
        totalAmount = amount * Math.pow(1 + quarterlyRate, quarters);
        income = totalAmount - amount;
        effectiveRate = (Math.pow(1 + quarterlyRate, 4) - 1) * 100;
    } else if (interestType === 'yearly') {
        // –ï–∂–µ–≥–æ–¥–Ω–∞—è –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è
        const yearlyRate = rate / 100;
        const years = term / 12;
        totalAmount = amount * Math.pow(1 + yearlyRate, years);
        income = totalAmount - amount;
        effectiveRate = rate;
    } else {
        // –ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã –≤ –∫–æ–Ω—Ü–µ —Å—Ä–æ–∫–∞
        income = amount * rate / 100 * term / 12;
        totalAmount = amount + income;
        effectiveRate = rate;
    }
    
    document.getElementById('totalAmount').textContent = Math.round(totalAmount).toLocaleString() + ' ‚ÇΩ';
    document.getElementById('depositIncome').textContent = Math.round(income).toLocaleString() + ' ‚ÇΩ';
    document.getElementById('effectiveRate').textContent = effectiveRate.toFixed(2) + '%';
    
    document.getElementById('depositCalculationResult').classList.remove('hidden');
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–µ–ø–æ–∑–∏—Ç–∞
document.getElementById('depositForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const formData = new FormData(this);
    
    alert('–î–µ–ø–æ–∑–∏—Ç —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫—Ä—ã—Ç! –°—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –≤–∞—à–µ–º —Å—á–µ—Ç–µ.');
    closeDepositModal();
    this.reset();
});
</script>
{% endblock %}