#!/usr/bin/env bash
set -euo pipefail

# –°–æ–∑–¥–∞—ë–º .env –∏–∑ env.sample, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
if [ ! -f .env ]; then
  if [ -f env.sample ]; then
    cp env.sample .env
    echo "‚úì –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª .env –∏–∑ env.sample"
    echo "‚ö†Ô∏è  –í–ê–ñ–ù–û: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SECRET_KEY!"
  else
    echo "‚ùå –§–∞–π–ª env.sample –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ .env –≤—Ä—É—á–Ω—É—é."
    exit 1
  fi
fi

echo "üöÄ –ó–∞–ø—É—Å–∫ Docker Compose..."
echo "   (–º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)"

# –°–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑—ã –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose up -d --build

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ."
echo ""
echo "üì± –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8000"
echo "üìä –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤: docker compose logs -f app"
echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞: docker compose stop"
echo ""
echo "üí° –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–¥—É—Ç—Å—è:"
echo "   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (operator1, operator2, client1-client5)"
echo "   - –ù–æ–≤–æ—Å—Ç–∏ –¥–ª—è –±–µ–≥—É—â–µ–π —Å—Ç—Ä–æ–∫–∏"
echo "   - 110+ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π"
echo "   - –£—Å–ª—É–≥–∏, –∫–∞—Ä—Ç—ã, –¥–µ–ø–æ–∑–∏—Ç—ã –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ"


